(function(d,g){function e(c,a){var b=this;b.xhrRequest=null;b.currentOptions=d.extend({},{source:null,minChars:1,triggerEvent:"blur",deferRequestBy:0,lookupPredicate:function(a,b){return-1!==a.toLowerCase().indexOf(b.toLowerCase())}},a);b.isLocal=d.isArray(b.currentOptions.source)?!0:!1;b.sourceElement=d(c).bind(b.currentOptions.triggerEvent,function(){b.eventHandler(this)});b.dependents=d(document).find('[data-injector="'+b.sourceElement[0].name+'"]').prop("readonly",!0)}e.objectIndexRegex=/\[(\d+)\]/;
e.replaceIndexRegex=/\[.*?\]/;e.prototype={eventHandler:function(c){var a=this;a.currentOptions.deferRequestBy?setTimeout(function(){a.makeRequest(c.value)},a.currentOptions.deferRequestBy):a.makeRequest(c.value)},makeRequest:function(c){var a=this,b=a.currentOptions;b.source&&(c.length<b.minChars?a.clearDependents():a.isLocal?a.fillDependents(a.getLocalData(c)):(a.xhrRequest&&a.xhrRequest.abort(),a.xhrRequest=d.get(b.source,{parent:c},function(b){a.fillDependents(b)},"json")))},parseObject:function(c,
a){var b=a.indexOf("."),d,f;f=a.substring(0,-1==b?a.length:b);c=(d=f.match(e.objectIndexRegex))?0==d.index?c[d[1]]:c[f.replace(e.replaceIndexRegex,"")][d[1]]:c[f];return-1==b?c:this.parseObject(c,a.substring(++b))},fillDependents:function(c){if(c){var a=this;d.each(a.dependents,function(){this.value=a.parseObject(c,d(this).attr("data-property"))})}else this.clearDependents()},clearDependents:function(){this.dependents.val("")},getLocalData:function(c){for(var a=this.currentOptions.lookupPredicate,
b=this.currentOptions.source,d,f=0,e=b.length;f<e;++f)if(d=b[f],a(d,c))return d;return null}};d.fn.autodependencies=function(c){return this.each(function(){var a=d(this);if(a.data("autodependencies"))a.data("autodependencies");else{var b=new e(this,c);a.data("autodependencies",b)}})}})(jQuery,void 0);
